<section class="booking-section pending-section">
  <h2>Pending Bookings</h2>
  @if (pendingBookings().length === 0) {
  <p>No pending bookings.</p>
  } @for (booking of pendingBookings(); track booking.bookingId) {
  <mat-card class="booking-card">
    <mat-card-title>
      Réservation #{{ booking.bookingId.slice(0, 8) }} &bull; {{
      booking.screening.theaterId }} &bull; {{ booking.screening.hallId }}
    </mat-card-title>
    <mat-card-content>
      <div><b>Film:</b> {{ booking.screening.movieId }}</div>
      <div>
        <b>Séance:</b>
        {{ booking.screening.startTime | date:'medium' }} ({{
        booking.screening.quality }})
      </div>
      <div><b>Seats:</b> {{ booking.seatsNumber }}</div>
      <div><b>Total:</b> {{ booking.totalPrice }} €</div>
      <div>
        <b>Status:</b>
        <span class="status pending">Pending</span>
      </div>
      <div class="qr-wrapper">
        <qrcode [qrdata]="booking.bookingId"></qrcode>
      </div>
    </mat-card-content>
  </mat-card>
  <mat-divider></mat-divider>
  }
</section>

<section class="booking-section used-section" style="margin-top: 2rem">
  <h2>Used Bookings</h2>
  @if (usedBookings().length === 0) {
  <p>No used bookings.</p>
  } @for (booking of usedBookings(); track booking.bookingId) {
  <mat-card class="booking-card">
    <mat-card-title>
      Réservation #{{ booking.bookingId.slice(0, 8) }} &bull; {{
      booking.screening.theaterId }} &bull; {{ booking.screening.hallId }}
    </mat-card-title>
    <mat-card-content>
      <div><b>Film:</b> {{ booking.screening.movieId }}</div>
      <div>
        <b>Séance:</b>
        {{ booking.screening.startTime | date:'medium' }} ({{
        booking.screening.quality }})
      </div>
      <div><b>Seats:</b> {{ booking.seatsNumber }}</div>
      <div><b>Total:</b> {{ booking.totalPrice }} €</div>
      <div>
        <b>Status:</b>
        <span class="status used">Used</span>
      </div>
      <div class="qr-wrapper">
        <qrcode [qrdata]="booking.bookingId"></qrcode>
      </div>
      @if (booking.comment) {
      <button
        mat-flat-button
        color="accent"
        class="add-comment-btn"
        (click)="openComment(booking)"
      >
        View comment
      </button>
      } @else {
      <button
        mat-stroked-button
        color="primary"
        class="add-comment-btn"
        (click)="openComment(booking)"
      >
        Commentaire
      </button>
      }
    </mat-card-content>
  </mat-card>
  }
</section>
